<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>Dashboard Farmacia ‚Äî Cat√°logo 2026</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.4.1/chart.umd.min.js"></script>
<style>
@import url('https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;600;700;800&family=JetBrains+Mono:wght@400;500;700&display=swap');
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
:root{
  --bg:#05080F;--card:#0B0F1A;--card2:#111827;--border:#1C2537;--border2:#243044;
  --text:#E8EDF5;--muted:#5C6E8A;--dim:#2D3E55;
  --cyan:#00D4AA;--cyan2:#00FFD1;--yellow:#F5A623;--red:#F04A4A;
  --purple:#8B7CF8;--orange:#F07832;--teal:#38BFA0;--blue:#4A9EF5;--green:#34D399;
}
body{font-family:'Space Grotesk',sans-serif;background:var(--bg);color:var(--text);height:100vh;overflow:hidden;display:flex;flex-direction:column}
/* TOP BAR */
.topbar{height:52px;background:#080C16;border-bottom:1px solid var(--border);display:flex;align-items:center;padding:0 20px;gap:0;flex-shrink:0}
.topbar-brand{display:flex;align-items:center;gap:10px;padding-right:24px;border-right:1px solid var(--border);margin-right:4px}
.brand-icon{width:28px;height:28px;background:linear-gradient(135deg,var(--cyan),var(--purple));border-radius:7px;display:flex;align-items:center;justify-content:center;font-size:14px;font-weight:800;color:#fff}
.brand-text{font-size:14px;font-weight:700;color:var(--text)}
.brand-sub{font-size:10px;color:var(--muted);font-family:'JetBrains Mono',monospace;margin-top:1px}
.nav-tabs{display:flex;gap:2px;flex:1;padding:0 16px}
.nav-tab{padding:6px 14px;border-radius:6px;cursor:pointer;font-size:12px;font-weight:600;color:var(--muted);display:flex;align-items:center;gap:7px;transition:all .18s;white-space:nowrap}
.nav-tab:hover{color:var(--text);background:#ffffff07}
.nav-tab.active{color:var(--cyan);background:#00D4AA18}
.nav-tab .ti{font-size:13px}
.topbar-right{display:flex;align-items:center;gap:12px;padding-left:16px;border-left:1px solid var(--border)}
.live-dot{width:7px;height:7px;background:var(--cyan);border-radius:50%;box-shadow:0 0 8px var(--cyan);animation:pulse 2s infinite}
@keyframes pulse{0%,100%{opacity:1}50%{opacity:.3}}
.topbar-date{font-size:10px;color:var(--muted);font-family:'JetBrains Mono',monospace}
/* LAYOUT */
.body{display:flex;flex:1;overflow:hidden}
.main{flex:1;overflow-y:auto;padding:22px 24px 24px}
.main::-webkit-scrollbar{width:4px}.main::-webkit-scrollbar-track{background:#050810}.main::-webkit-scrollbar-thumb{background:#1C2537;border-radius:2px}
/* PANELS */
.panel{display:none}.panel.active{display:block}
/* KPI ROW */
.kpi-row{display:grid;grid-template-columns:repeat(5,1fr);gap:12px;margin-bottom:20px}
.kpi{background:var(--card);border:1px solid var(--border);border-radius:11px;padding:14px 16px;position:relative;overflow:hidden;cursor:default}
.kpi::before{content:'';position:absolute;top:0;left:0;right:0;height:2px;background:var(--accent,var(--cyan))}
.kpi-val{font-family:'JetBrains Mono',monospace;font-size:20px;font-weight:700;color:var(--accent,var(--cyan));line-height:1}
.kpi-label{font-size:11px;color:var(--muted);margin-top:5px;font-weight:500}
.kpi-sub{font-size:10px;color:var(--dim);margin-top:2px;font-family:'JetBrains Mono',monospace}
/* GRID */
.g2{display:grid;grid-template-columns:1fr 1fr;gap:16px;margin-bottom:16px}
.g3{display:grid;grid-template-columns:1fr 1fr 1fr;gap:14px;margin-bottom:16px}
.g4{display:grid;grid-template-columns:repeat(4,1fr);gap:12px;margin-bottom:16px}
.g13{display:grid;grid-template-columns:1fr 3fr;gap:16px;margin-bottom:16px}
.g31{display:grid;grid-template-columns:3fr 1fr;gap:16px;margin-bottom:16px}
.s2{grid-column:1/-1}
/* CARD */
.card{background:var(--card);border:1px solid var(--border);border-radius:12px;padding:18px 20px;margin-bottom:16px}
.card0{background:var(--card);border:1px solid var(--border);border-radius:12px;padding:18px 20px}
.ct{font-size:10px;color:var(--muted);letter-spacing:2px;text-transform:uppercase;margin-bottom:14px;font-family:'JetBrains Mono',monospace;display:flex;align-items:center;gap:8px}
.ct-dot{width:6px;height:6px;border-radius:50%;background:var(--accent,var(--cyan));flex-shrink:0}
/* TABLE */
.tw{overflow:auto;max-height:400px}
.tw::-webkit-scrollbar{width:4px;height:4px}.tw::-webkit-scrollbar-track{background:#050810}.tw::-webkit-scrollbar-thumb{background:#1C2537;border-radius:2px}
table{width:100%;border-collapse:collapse;font-size:11px}
thead th{position:sticky;top:0;z-index:2;background:#080C16;text-align:left;font-size:9px;color:var(--dim);letter-spacing:2px;padding:8px 10px;border-bottom:1px solid var(--border);font-family:'JetBrains Mono',monospace;cursor:pointer;white-space:nowrap;user-select:none}
thead th:hover{color:var(--muted)}
.sa::after{content:" ‚Üë";color:var(--cyan)}.sd::after{content:" ‚Üì";color:var(--cyan)}
tbody td{padding:8px 10px;border-bottom:1px solid #0B0F1A;white-space:nowrap}
tbody tr:hover{background:#ffffff03}
tbody tr:last-child td{border-bottom:none}
/* BADGES */
.b{padding:2px 7px;border-radius:4px;font-size:10px;font-weight:700;font-family:'JetBrains Mono',monospace;white-space:nowrap}
.bg{background:#00D4AA18;color:var(--cyan)}.by{background:#F5A62318;color:var(--yellow)}.br{background:#F04A4A18;color:var(--red)}.bx{background:#1C253722;color:var(--muted)}.bp{background:#8B7CF818;color:var(--purple)}.bb{background:#4A9EF518;color:var(--blue)}
/* URGENCY BADGES */
.u-neg{background:#F04A4A22;color:var(--red);border:1px solid #F04A4A44}
.u-ago{background:#F07832,22;color:var(--orange);border:1px solid #F0783244}
.u-crit{background:#F5A62322;color:var(--yellow);border:1px solid #F5A62344}
.u-bajo{background:#4A9EF522;color:var(--blue);border:1px solid #4A9EF544}
.u-ok{background:#34D39922;color:var(--green);border:1px solid #34D39944}
/* FILTERS */
.fbar{display:flex;gap:8px;flex-wrap:wrap;margin-bottom:12px;align-items:center}
.fi{background:var(--card2);border:1px solid var(--border);border-radius:7px;padding:6px 11px;font-size:11px;color:var(--text);font-family:'Space Grotesk',sans-serif;outline:none;transition:border .15s}
.fi:focus{border-color:var(--cyan)}
.fs{background:var(--card2);border:1px solid var(--border);border-radius:7px;padding:6px 10px;font-size:11px;color:var(--text);font-family:'Space Grotesk',sans-serif;outline:none;cursor:pointer}
.fb{border:none;border-radius:7px;padding:6px 13px;font-size:11px;font-weight:700;cursor:pointer;font-family:'Space Grotesk',sans-serif;transition:all .15s}
.fb-p{background:var(--cyan);color:#05080F}
.fb-s{background:transparent;border:1px solid var(--border);color:var(--muted)}
.fb-s:hover{border-color:var(--muted);color:var(--text)}
.rcount{font-size:10px;color:var(--muted);font-family:'JetBrains Mono',monospace;margin-left:auto}
/* PAGINATION */
.pag{display:flex;align-items:center;gap:6px;margin-top:10px;justify-content:flex-end;flex-wrap:wrap}
.pb{background:var(--card2);border:1px solid var(--border);border-radius:5px;padding:4px 9px;font-size:10px;color:var(--muted);cursor:pointer;font-family:'JetBrains Mono',monospace}
.pb:hover{color:var(--text)}.pb.on{background:var(--cyan);color:#05080F;border-color:var(--cyan);font-weight:700}.pb:disabled{opacity:.3;cursor:not-allowed}
/* STAT ROW */
.sr{display:flex;justify-content:space-between;align-items:center;padding:8px 0;border-bottom:1px solid #0D1220}
.sr:last-child{border-bottom:none}
.sl{font-size:11px;color:var(--muted)}
.sv{font-size:13px;font-weight:700;font-family:'JetBrains Mono',monospace}
/* PROGRESS */
.pw{margin-bottom:11px}
.ph{display:flex;justify-content:space-between;margin-bottom:4px}
.pn{font-size:11px;color:#8899AA}
.pp{font-size:11px;font-weight:700;font-family:'JetBrains Mono',monospace}
.pt{background:#0D1220;border-radius:3px;height:5px}
.pf{height:100%;border-radius:3px;transition:width .8s ease}
/* LEGEND */
.leg{display:flex;flex-direction:column;gap:7px}
.li{display:flex;justify-content:space-between;align-items:center}
.ld{width:8px;height:8px;border-radius:2px;margin-right:6px;flex-shrink:0}
.ll{font-size:11px;color:var(--muted);display:flex;align-items:center}
.lv{font-size:12px;font-weight:700;font-family:'JetBrains Mono',monospace}
/* INSIGHT BOX */
.ib{background:var(--bg);border-radius:8px;padding:12px 14px;border:1px solid var(--border);font-size:11px;color:var(--muted);line-height:1.7;margin-top:12px}
/* STOCK BARS */
.stock-bar{display:flex;height:22px;border-radius:6px;overflow:hidden;margin-bottom:4px}
.stock-seg{display:flex;align-items:center;justify-content:center;font-size:9px;font-weight:700;font-family:JetBrains Mono,monospace;transition:width .8s ease}
/* ALERT CARDS */
.ac{border-radius:11px;padding:16px 18px;border:1px solid}
.ai{font-size:18px;margin-bottom:8px}
.av{font-family:'JetBrains Mono',monospace;font-size:20px;font-weight:700}
.at{font-size:12px;font-weight:600;color:#E8EDF5;margin-top:4px}
.as{font-size:10px;color:var(--muted);margin-top:2px}
/* TABS INLINE */
.itabs{display:flex;gap:6px;margin-bottom:14px}
.itab{padding:6px 14px;border-radius:6px;font-size:11px;font-weight:700;cursor:pointer;font-family:'Space Grotesk',sans-serif;transition:all .15s}
/* CHART CLICK AREA */
.chart-clickable{cursor:pointer}
.chart-hint{font-size:10px;color:var(--dim);margin-top:6px;text-align:center;font-family:'JetBrains Mono',monospace}
/* REORDER TABLE SPECIAL */
.inv-total{background:#0D1220;border-radius:8px;padding:10px 14px;display:flex;justify-content:space-between;align-items:center;margin-bottom:12px;border:1px solid var(--border2)}
.inv-label{font-size:11px;color:var(--muted)}
.inv-val{font-size:16px;font-weight:700;font-family:'JetBrains Mono',monospace;color:var(--yellow)}
/* SECTION DIVIDERS */
.sdiv{font-size:10px;color:var(--dim);letter-spacing:3px;text-transform:uppercase;margin:20px 0 12px;display:flex;align-items:center;gap:10px;font-family:'JetBrains Mono',monospace}
.sdiv::after{content:'';flex:1;height:1px;background:var(--border)}
/* PAGE TITLE */
.ptitle{margin-bottom:20px}
.ptitle h2{font-size:18px;font-weight:800;color:var(--text)}
.ptitle h2 span{color:var(--cyan)}
.ptitle p{font-size:11px;color:var(--muted);margin-top:4px;font-family:'JetBrains Mono',monospace}
/* RECO CARDS */
.rc{background:var(--bg);border-radius:9px;padding:14px 16px;display:flex;gap:12px;border:1px solid}
.rn{font-size:18px;font-weight:800;opacity:.3;min-width:24px;font-family:'JetBrains Mono',monospace}
.rt{font-size:12px;font-weight:700;margin-bottom:4px}
.rb{font-size:11px;color:var(--muted);line-height:1.5}
@media(max-width:1100px){.kpi-row{grid-template-columns:repeat(3,1fr)}.g2{grid-template-columns:1fr}.nav-tab span:last-child{display:none}}
</style>
</head>
<body>

<!-- TOP BAR -->
<div class="topbar">
  <div class="topbar-brand">
    <div class="brand-icon">Rx</div>
    <div><div class="brand-text">Farmacia Dashboard</div><div class="brand-sub">CAT√ÅLOGO 27/02/2026</div></div>
  </div>
  <div class="nav-tabs">
    <div class="nav-tab active" onclick="SP('resumen',this)"><span class="ti">‚¨°</span><span>Resumen</span></div>
    <div class="nav-tab" onclick="SP('catalogo',this)"><span class="ti">‚ò∞</span><span>Cat√°logo</span></div>
    <div class="nav-tab" onclick="SP('margenes',this)"><span class="ti">‚óÜ</span><span>M√°rgenes</span></div>
    <div class="nav-tab" onclick="SP('deptos',this)"><span class="ti">‚ñ¶</span><span>Deptos</span></div>
    <div class="nav-tab" onclick="SP('proveedores',this)"><span class="ti">‚óâ</span><span>Proveedores</span></div>
    <div class="nav-tab" onclick="SP('stock',this)"><span class="ti">üì¶</span><span>Stock</span></div>
    <div class="nav-tab" onclick="SP('resurtido',this)"><span class="ti">üîÑ</span><span>Resurtido</span></div>
    <div class="nav-tab" onclick="SP('alertas',this)"><span class="ti">‚ö†</span><span>Alertas</span></div>
  </div>
  <div class="topbar-right"><div class="live-dot"></div><div class="topbar-date">27 / 02 / 2026</div></div>
</div>

<div class="body">
<div class="main" id="mainContent">

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê PANEL RESUMEN ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div class="panel active" id="panel-resumen">
  <div class="ptitle"><h2>Resumen <span>General</span></h2><p>Vista ejecutiva del cat√°logo completo ¬∑ 4,651 SKUs</p></div>
  <div class="kpi-row">
    <div class="kpi" style="--accent:var(--cyan)"><div class="kpi-val" id="k-total">‚Äî</div><div class="kpi-label">Total SKUs</div><div class="kpi-sub">en cat√°logo activo</div></div>
    <div class="kpi" style="--accent:var(--yellow)"><div class="kpi-val" id="k-neto">‚Äî</div><div class="kpi-label">Valor Neto Total</div><div class="kpi-sub">suma precio neto</div></div>
    <div class="kpi" style="--accent:var(--red)"><div class="kpi-val" id="k-margen">‚Äî</div><div class="kpi-label">Margen Promedio</div><div class="kpi-sub">% sobre precio</div></div>
    <div class="kpi" style="--accent:var(--purple)"><div class="kpi-val" id="k-precio">‚Äî</div><div class="kpi-label">Precio Promedio</div><div class="kpi-sub">por producto</div></div>
    <div class="kpi" style="--accent:var(--orange)"><div class="kpi-val" id="k-agotados">‚Äî</div><div class="kpi-label">Agotados+Cr√≠ticos</div><div class="kpi-sub">resurtido activo</div></div>
  </div>
  <div class="g2">
    <div class="card0">
      <div class="ct"><div class="ct-dot"></div>Valor Neto por Departamento (Top 15)</div>
      <div class="chart-clickable"><canvas id="cNetoDepto" height="280"></canvas></div>
      <div class="chart-hint">Clic en una barra para ver productos del departamento ‚Üí</div>
    </div>
    <div class="card0">
      <div class="ct"><div class="ct-dot" style="background:var(--yellow)"></div>Distribuci√≥n de M√°rgenes</div>
      <div style="display:flex;gap:14px;align-items:center">
        <div style="flex:0 0 170px"><canvas id="cMargenPie" height="170"></canvas></div>
        <div class="leg" id="legMargen"></div>
      </div>
      <div class="ib" id="ibResumen"></div>
    </div>
  </div>
  <div class="g3">
    <div class="card0">
      <div class="ct"><div class="ct-dot" style="background:var(--yellow)"></div># Productos por Departamento</div>
      <canvas id="cProdDepto" height="220"></canvas>
    </div>
    <div class="card0">
      <div class="ct"><div class="ct-dot" style="background:var(--purple)"></div>Rangos de Precio</div>
      <canvas id="cRangoPrecio" height="220"></canvas>
    </div>
    <div class="card0">
      <div class="ct"><div class="ct-dot" style="background:var(--red)"></div>Estado de Stock Global</div>
      <canvas id="cStockPie" height="220"></canvas>
    </div>
  </div>
</div>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê PANEL CAT√ÅLOGO ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div class="panel" id="panel-catalogo">
  <div class="ptitle"><h2>Cat√°logo <span>Completo</span></h2><p>4,651 productos ¬∑ filtros combinables ¬∑ ordenable por columna</p></div>
  <div class="card0">
    <div class="fbar">
      <input class="fi" id="catS" placeholder="üîç Nombre o clave..." oninput="FC()" style="min-width:200px">
      <select class="fs" id="catD" onchange="FC()"><option value="">Todos los deptos</option></select>
      <select class="fs" id="catP" onchange="FC()"><option value="">Todos los proveedores</option></select>
      <select class="fs" id="catM" onchange="FC()">
        <option value="">Cualquier margen</option>
        <option value="neg">Negativo</option>
        <option value="0_10">0‚Äì10%</option>
        <option value="10_20">10‚Äì20%</option>
        <option value="20_30">20‚Äì30%</option>
        <option value="30_50">30‚Äì50%</option>
        <option value="mas50">&gt;50%</option>
      </select>
      <select class="fs" id="catR" onchange="FC()">
        <option value="">Cualquier resurtido</option>
        <option value="V">Activo (V)</option>
        <option value="N">Inactivo (N)</option>
      </select>
      <select class="fs" id="catU" onchange="FC()">
        <option value="">Cualquier stock</option>
        <option value="negativo">Stock negativo</option>
        <option value="agotado">Agotado (0)</option>
        <option value="critico">Cr√≠tico (1-5)</option>
        <option value="bajo">Bajo (6-20)</option>
        <option value="ok">OK (&gt;20)</option>
      </select>
      <select class="fs" id="catI" onchange="FC()">
        <option value="">Cualquier IVA</option>
        <option value="16">IVA 16%</option>
        <option value="0">Sin IVA</option>
      </select>
      <button class="fb fb-s" onclick="RCat()">‚úï Limpiar</button>
      <span class="rcount" id="cntCat"></span>
    </div>
    <div class="tw"><table id="tCat"><thead><tr>
      <th onclick="ST('tCat',0,fCat,rCat)">CLAVE</th>
      <th onclick="ST('tCat',1,fCat,rCat)">NOMBRE</th>
      <th onclick="ST('tCat',2,fCat,rCat)">DEPTO</th>
      <th onclick="ST('tCat',3,fCat,rCat)">PROVEEDOR</th>
      <th onclick="ST('tCat',4,fCat,rCat,true)">COSTO</th>
      <th onclick="ST('tCat',5,fCat,rCat,true)">PRECIO</th>
      <th onclick="ST('tCat',6,fCat,rCat,true)">DESC%</th>
      <th onclick="ST('tCat',7,fCat,rCat,true)">IVA%</th>
      <th onclick="ST('tCat',8,fCat,rCat,true)">NETO</th>
      <th onclick="ST('tCat',9,fCat,rCat,true)">MARGEN%</th>
      <th onclick="ST('tCat',10,fCat,rCat,true)">EXISTENCIA</th>
      <th onclick="ST('tCat',11,fCat,rCat)">RESURTIDO</th>
      <th onclick="ST('tCat',12,fCat,rCat)">CONTROL</th>
      <th onclick="ST('tCat',13,fCat,rCat)">URGENCIA</th>
    </tr></thead><tbody id="tbCat"></tbody></table></div>
    <div class="pag" id="pagCat"></div>
  </div>
</div>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê PANEL M√ÅRGENES ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div class="panel" id="panel-margenes">
  <div class="ptitle"><h2>An√°lisis de <span>M√°rgenes</span></h2><p>Rentabilidad por producto, departamento y proveedor</p></div>
  <div class="g2">
    <div class="card">
      <div class="ct"><div class="ct-dot"></div>Estad√≠sticas de Rentabilidad</div>
      <div class="sr"><span class="sl">Margen promedio global</span><span class="sv" style="color:var(--cyan)" id="mm-avg">‚Äî</span></div>
      <div class="sr"><span class="sl">Productos margen &gt; 50%</span><span class="sv" style="color:var(--purple)" id="mm-m50">‚Äî</span></div>
      <div class="sr"><span class="sl">Productos margen 30‚Äì50%</span><span class="sv" style="color:var(--teal)" id="mm-3050">‚Äî</span></div>
      <div class="sr"><span class="sl">Productos margen 20‚Äì30%</span><span class="sv" style="color:var(--cyan)" id="mm-2030">‚Äî</span></div>
      <div class="sr"><span class="sl">Productos margen 10‚Äì20%</span><span class="sv" style="color:var(--yellow)" id="mm-1020">‚Äî</span></div>
      <div class="sr"><span class="sl">Productos margen 0‚Äì10%</span><span class="sv" style="color:var(--orange)" id="mm-010">‚Äî</span></div>
      <div class="sr"><span class="sl">Margen NEGATIVO (p√©rdida)</span><span class="sv" style="color:var(--red)" id="mm-neg">‚Äî</span></div>
      <div class="sr"><span class="sl">Con descuento activo</span><span class="sv" style="color:var(--blue)" id="mm-desc">‚Äî</span></div>
      <div class="sr"><span class="sl">Con IVA 16%</span><span class="sv" style="color:var(--muted)" id="mm-iva">1,590</span></div>
    </div>
    <div class="card">
      <div class="ct"><div class="ct-dot" style="background:var(--yellow)"></div>Margen Promedio vs Valor Neto (Top Deptos)</div>
      <canvas id="cDual" height="220"></canvas>
    </div>
  </div>
  <div class="card">
    <div class="ct"><div class="ct-dot" style="background:var(--red)"></div>Explorar Productos por Rango de Margen</div>
    <div class="fbar">
      <button class="fb" style="background:#F04A4A22;color:var(--red);border:1px solid #F04A4A44" onclick="FM(-9999,-0.01,'Margen Negativo')">‚ö† Negativo (48)</button>
      <button class="fb" style="background:#F0783222;color:var(--orange);border:1px solid #F0783244" onclick="FM(0,10,'Margen 0‚Äì10%')">0‚Äì10%</button>
      <button class="fb" style="background:#F5A62322;color:var(--yellow);border:1px solid #F5A62344" onclick="FM(10,20,'Margen 10‚Äì20%')">10‚Äì20%</button>
      <button class="f
